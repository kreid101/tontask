import{j as s,r as i,y as c}from"./app-C1FQkjYa.js";import{d as o}from"./useTonConnect-JmYoy3V7.js";import{u as m}from"./useTaskParentContract-CpOJkH2F.js";function w({task:e}){const d=e.responses.map(t=>s.jsxs("div",{className:"flex gap-4",children:[" ",s.jsx("p",{children:t.user_id})," ",s.jsx("button",{onClick:()=>l(t),children:"choose"})," "]},t.id)),[a,u]=i.useState({id:BigInt(e.id),sender:o.Address.parse(e.user_id),executor:null,coin_amount:o.toNano(e.price)}),l=async t=>{await u(r=>({...r,executor:o.Address.parse(t.user_id)})),n.newTask(a)},n=m(),h=async()=>{let t=await n.getChild(e.id);n.markAsDone(t)};async function x(){let t=await n.getChild(e.id);if(t!==null){let r=await n.getChildInfo(t);Number(r.status)!==e.status&&c.post("/updtask",{id:Number(e.id),status:Number(r.status),exec:r.executor.toString()})}}const p=()=>{setInterval(x,5e3)};return i.useEffect(p,[]),s.jsxs("div",{children:[s.jsx("button",{onClick:()=>{c.get("/")},children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})})}),s.jsx("h1",{children:e.headline}),s.jsxs("p",{children:["Status : ",e.status]}),s.jsx("p",{children:e.description}),e.status==0?"responses:"+{exec:d}:"",e.status==1?s.jsx("button",{onClick:h,children:"mark"}):""]})}export{w as default};
